!function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){var o=t("domready"),i=(t("raf"),t("./ui")),r=t("./sound"),s=t("./input");o(function(){function t(t){t.preventDefault(),c.handleMotionEvent(t),h.handleMotionEvent(t)}function e(t){t.preventDefault(),h.handleOrientationEvent(t)}var n,o="/assets/sand.mp3",a=document.body;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,n=new AudioContext}catch(u){return alert("your device does not support audiocontext, maybe try newest chrome!")}if(!window.DeviceMotionEvent)return alert("Hmm, your device does not support DeviceMotion. This is needed :(");n=null;var h=new s({dom:a}),c=new i({dom:a}),l=new r({url:o,volumne:.5});h.on("start",function(){l.onStart()}),h.on("move",function(){l.onMove(),c.draw()}),h.on("not-moving",function(){l.onNotMove()}),h.on("end",function(){l.onEnd()}),window.DeviceMotionEvent&&window.addEventListener("devicemotion",t,!1),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",e,!1)})},{"./input":2,"./sound":3,"./ui":4,domready:7,raf:9}],2:[function(t,e,n){function o(t){r.call(this),t=t||{},this.dom=t.dom,this.isMoving=!1,this.lastOrient={a:0,b:0},this.lastGrav={x:0,b:0},this.dom.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.dom.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.dom.addEventListener("touchend",this.onTouchEnd.bind(this),!1),this.dom.onselectstart=function(){return!1}}var i=t("inherits"),r=t("events").EventEmitter;e.exports=o,i(o,r),o.prototype.handleMotionEvent=function(t){var e=Math.abs((t.acceleration.x||0).toFixed(1));Math.abs(this.lastGrav.x-e)>3&&(this.isMoving||(this.isMoving=!0)),this.lastGrav.x=e},o.prototype.handleOrientationEvent=function(t){var e=parseFloat(t.alpha).toFixed(2),n=parseFloat(t.beta).toFixed(2);this.isMoving=Math.abs(this.lastOrient.a-e)>1||Math.abs(this.lastOrient.b-n)>1?!0:!1,this.lastOrient.a=e,this.lastOrient.b=n},o.prototype.onTouchStart=function(t){t.preventDefault(),this.emit("start")},o.prototype.onTouchMove=function(t){t.preventDefault(),this.emit(this.isMoving?"move":"not-moving")},o.prototype.onTouchEnd=function(t){t.preventDefault(),this.emit("end")}},{events:5,inherits:8}],3:[function(t,e,n){function o(t){t=t||{},this.volume=t.volume||.5,this.url=t.url,this.ctx=new AudioContext,this.muteRate=1e-9,this.playRate=1,this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=this.volume,this.gainNode.connect(this.ctx.destination),this.loadSource(this.url,this.onSoundLoaded.bind(this))}e.exports=o,o.prototype.loadSource=function(t,e){if(this.storedBuffer)return e(null,this.createSource(this.storedBuffer).bind(this));var n=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){n.ctx.decodeAudioData(o.response,function(t){return n.storedBuffer=t,e(null,n.createSource(t))},function(t){console.log("error loading sound :(")})},o.send()},o.prototype.createSource=function(t){var e=this.ctx.createBufferSource();return e.buffer=t,e.connect(this.gainNode),e.loop=!0,e},o.prototype.onSoundLoaded=function(t,e){return t?console.log("Oops, error loading sound :("):(this.sound=e,this.sound.playbackRate.value=this.muteRate,void this.sound.start(0))},o.prototype.onStart=function(t){this.sound.playbackRate.value=this.playRate},o.prototype.onEnd=function(t){this.sound&&(this.sound.playbackRate.value=this.muteRate)},o.prototype.onMove=function(t){this.sound.playbackRate.value=this.playRate},o.prototype.onNotMove=function(){this.sound.playbackRate.value-=.2}},{}],4:[function(t,e,n){function o(t){this.dom=t.dom||document.body,this.vx=0,this.vy=0,this.vz=0,this.ax=0,this.ay=0,this.az=0,this.aa=0,this.ab=0,this.ag=0,this.ra=0,this.rb=0,this.rg=0,this.rr=0}e.exports=o;var i=Math.round,r=Math.abs;o.prototype.handleMotionEvent=function(t){var e=t.accelerationIncludingGravity,n=t.rotationRate;this.ax=i(r(1*e.x)),this.ay=i(r(1*e.y)),this.az=i(r(1*e.z)),null!==n&&(this.aa=i(n.alpha),this.ab=i(n.beta),this.ag=i(n.gamma))},o.prototype.draw=function(){var t=this.makeColor(this.aa,this.ab,this.ag);this.dom.style.backgroundColor="#"+t[0].toString(16).substr(1)+t[1].toString(16).substr(1)+t[2].toString(16).substr(1),this.dom.style.color="#"+(512-t[0]).toString(16).substr(1)+(512-t[1]).toString(16).substr(1)+(512-t[2]).toString(16).substr(1)},o.prototype.makeColor=function(t,e,n){var o=r(100*t)%255,i=r(100*e)%255,s=r(100*n)%255,a=60;return[0|256+o+(256-o)*a/100,0|256+i+(256-i)*a/100,0|256+s+(256-s)*a/100]}},{}],5:[function(t,e,n){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},o.prototype.emit=function(t){var e,n,o,r,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,r=new Array(o-1),u=1;o>u;u++)r[u-1]=arguments[u];n.apply(this,r)}else if(s(n)){for(o=arguments.length,r=new Array(o-1),u=1;o>u;u++)r[u-1]=arguments[u];for(h=n.slice(),o=h.length,u=0;o>u;u++)h[u].apply(this,r)}return!0},o.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=a(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},o.prototype.removeListener=function(t,e){var n,o,r,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,o=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=r;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},o.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},o.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},o.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],6:[function(t,e,n){function o(){c=!1,a.length?h=a.concat(h):l=-1,h.length&&i()}function i(){if(!c){var t=setTimeout(o);c=!0;for(var e=h.length;e;){for(a=h,h=[];++l<e;)a[l].run();l=-1,e=h.length}a=null,c=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},h=[],c=!1,l=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new r(t,e)),1!==h.length||c||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],7:[function(t,e,n){!function(t,n){"undefined"!=typeof e?e.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[t]=n()}("domready",function(){var t,e=[],n=document,o=n.documentElement.doScroll,i="DOMContentLoaded",r=(o?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return r||n.addEventListener(i,t=function(){for(n.removeEventListener(i,t),r=1;t=e.shift();)t()}),function(t){r?setTimeout(t,0):e.push(t)}})},{}],8:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],9:[function(t,e,n){for(var o=t("performance-now"),i="undefined"==typeof window?{}:window,r=["moz","webkit"],s="AnimationFrame",a=i["request"+s],u=i["cancel"+s]||i["cancelRequest"+s],h=0;h<r.length&&!a;h++)a=i[r[h]+"Request"+s],u=i[r[h]+"Cancel"+s]||i[r[h]+"CancelRequest"+s];if(!a||!u){var c=0,l=0,f=[],d=1e3/60;a=function(t){if(0===f.length){var e=o(),n=Math.max(0,d-(e-c));c=n+e,setTimeout(function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return f.push({handle:++l,callback:t,cancelled:!1}),l},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}e.exports=function(t){return a.call(i,t)},e.exports.cancel=function(){u.apply(i,arguments)}},{"performance-now":10}],10:[function(t,e,n){(function(t){(function(){var n,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},o=t.hrtime,n=function(){var t;return t=o(),1e9*t[0]+t[1]},i=n()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t("_process"))},{_process:6}]},{},[1]);